version: '3'

services:
  pulsar:
    stop_grace_period: 100ms
    container_name: pulsar
    image: apachepulsar/pulsar:3.1.2
    command: bin/pulsar standalone
    ports:
      - "6650:6650"
      - "8080:8080"
    healthcheck:
      test: >
        sh -c "/pulsar/bin/pulsar-admin brokers healthcheck &&
               /pulsar/bin/pulsar-admin topics list public/default"
      interval: 2s
      timeout: 20s
      retries: 100
      start_period: 100ms

